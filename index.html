<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <!--// <script src='/dist/client.express-0.0.1.js' type='text/javascript'></script> //-->
    <script src='/src/client.express.js' type='text/javascript'></script>
    <script src='/src/client.express.logger.js' type='text/javascript'></script>
    <script src='/src/client.express.server.js' type='text/javascript'></script>
    <script src='/src/client.express.route.js' type='text/javascript'></script>
    <script src='/src/client.express.router.js' type='text/javascript'></script>
    <script src='/src/client.express.event.listener.js' type='text/javascript'></script>
    <script src='/src/client.express.request.js' type='text/javascript'></script>
    <script src='/src/client.express.response.js' type='text/javascript'></script>
    <script src='/src/client.express.utils.js' type='text/javascript'></script>
    
  </head>
  <body>
    <a href="/get_test">get_test</a></br>
    
    <form action="/post_test" method="post">
      <input type="hidden" value="12" name="test">
      <button type="submit">send</button>
    </form>
    </br></br>
    <a href="/get_test/not_there">get_test (fails)</a></br>
    
    <form action="/post_test/not_there" method="post">
      <input type="hidden" value="12" name="test">
      <button type="submit">send (fails)</button>
    </form>


    <script type="text/javascript">
      var server = ClientExpress.createServer();
      
      server.logger();
      
      server.get('/get_test', function(request, response) {
        console.log("session.test = " + request.session.test);
      });
      server.post('/post_test', function(request, response) {
        request.session.test = 10;
        console.log("setting session.test to 10");
        response.redirect('/get_test');
      });
      
      server.listen();
    </script>

  </body>
</html>